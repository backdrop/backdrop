(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function m(b,k){return"pairs"==k&&"string"==typeof b?b:"object"==typeof b&&null!=b[k]?b[k]:l[k]}function h(b){return function(k){return f(k,b)}}function j(b){var k=b.state.closeBrackets,c;return k?(c=b.getModeAt(b.getCursor()),c.closeBrackets||k):null}function f(b,k){var g=j(b),i,f,n,l;if(!g||b.getOption("disableInput")||
(i=m(g,"pairs"),f=i.indexOf(k),-1==f))return a.Pass;for(var h=m(g,"triples"),w=i.charAt(f+1)==k,s=b.listSelections(),A=0==f%2,v,r,g=0;g<s.length;g++){var B=s[g],q=B.head;r=b.getRange(q,c(q.line,q.ch+1));if(A&&!B.empty())r="surround";else if((w||!A)&&r==k)r=0<=h.indexOf(k)&&b.getRange(q,c(q.line,q.ch+3))==k+k+k?"skipThree":"skip";else if(w&&1<q.ch&&0<=h.indexOf(k)&&b.getRange(c(q.line,q.ch-2),q)==k+k&&(2>=q.ch||b.getRange(c(q.line,q.ch-3),c(q.line,q.ch-2))!=k))r="addFour";else if(w)if(!a.isWordChar(r)&&
e(b,q,k))r="both";else return a.Pass;else if(A&&(b.getLine(q.line).length==q.ch||d(r,i)||/\s/.test(r)))r="both";else return a.Pass;if(v){if(v!=r)return a.Pass}else v=r}n=f%2?i.charAt(f-1):k;l=f%2?k:i.charAt(f+1);b.operation(function(){var k,c;if("skip"==v)b.execCommand("goCharRight");else if("skipThree"==v)for(c=0;3>c;c++)b.execCommand("goCharRight");else if("surround"==v){k=b.getSelections();for(c=0;c<k.length;c++)k[c]=n+k[c]+l;b.replaceSelections(k,"around")}else"both"==v?(b.replaceSelection(n+
l,null),b.triggerElectric(n+l),b.execCommand("goCharLeft")):"addFour"==v&&(b.replaceSelection(n+n+n+n,"before"),b.execCommand("goCharRight"))})}function d(b,k){var c=k.lastIndexOf(b);return-1<c&&1==c%2}function i(b,k){var g=b.getRange(c(k.line,k.ch-1),c(k.line,k.ch+1));return 2==g.length?g:null}function e(b,c,g){var e=b.getLine(c.line),d=b.getTokenAt(c);if(/\bstring2?\b/.test(d.type))return!1;g=new a.StringStream(e.slice(0,c.ch)+g+e.slice(c.ch),4);for(g.pos=g.start=d.start;;){if(e=b.getMode().token(g,
d.state),g.pos>=c.ch+1)return/\bstring2?\b/.test(e);g.start=g.pos}}var l={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"},c=a.Pos,n,g,b;a.defineOption("autoCloseBrackets",!1,function(b,c,e){e&&e!=a.Init&&(b.removeKeyMap(g),b.state.closeBrackets=null);c&&(b.state.closeBrackets=c,b.addKeyMap(g))});n=l.pairs+"`";g={Backspace:function(b){var k=j(b),g,e,d;if(!k||b.getOption("disableInput"))return a.Pass;g=m(k,"pairs");k=b.listSelections();for(d=0;d<k.length;d++)if(!k[d].empty()||(e=i(b,k[d].head),!e||
0!=g.indexOf(e)%2))return a.Pass;for(d=k.length-1;0<=d;d--)e=k[d].head,b.replaceRange("",c(e.line,e.ch-1),c(e.line,e.ch+1))},Enter:function(b){var c=j(b),c=c&&m(c,"explode"),e,g,d;if(!c||b.getOption("disableInput"))return a.Pass;e=b.listSelections();for(g=0;g<e.length;g++)if(!e[g].empty()||(d=i(b,e[g].head),!d||0!=c.indexOf(d)%2))return a.Pass;b.operation(function(){var c,g;b.replaceSelection("\n\n",null);b.execCommand("goCharLeft");e=b.listSelections();for(c=0;c<e.length;c++)g=e[c].head.line,b.indentLine(g,
null,!0),b.indentLine(g+1,null,!0)})}};for(b=0;b<n.length;b++)g["'"+n.charAt(b)+"'"]=h(n.charAt(b))});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],a):a(CodeMirror)})(function(a){function m(e){var l,c,n,g,b,o;if(e.getOption("disableInput"))return a.Pass;l=e.listSelections();c=[];for(b=0;b<l.length;b++){if(!l[b].empty())return a.Pass;o=l[b].head;g=e.getTokenAt(o);var k=a.innerMode(e.getMode(),g.state),p=k.state;if("xml"!=k.mode.name||
!p.tagName)return a.Pass;var h=e.getOption("autoCloseTags"),m="html"==k.mode.configuration,k="object"==typeof h&&h.dontCloseTags||m&&d,m="object"==typeof h&&h.indentTags||m&&i,h=p.tagName;if(g.end>o.ch&&(h=h.slice(0,h.length-g.end+o.ch)),n=h.toLowerCase(),!h||"string"==g.type&&(g.end!=o.ch||!/[\"\']/.test(g.string.charAt(g.string.length-1))||1==g.string.length)||"tag"==g.type&&"closeTag"==p.type||g.string.indexOf("/")==g.string.length-1||k&&-1<j(k,n)||f(e,h,o,p,!0))return a.Pass;g=m&&-1<j(m,n);c[b]=
{indent:g,text:">"+(g?"\n\n":"")+"</"+h+">",newPos:g?a.Pos(o.line+1,0):a.Pos(o.line,o.ch+1)}}for(b=l.length-1;0<=b;b--)n=c[b],e.replaceRange(n.text,l[b].head,l[b].anchor,"+insert"),o=e.listSelections().slice(0),o[b]={head:n.newPos,anchor:n.newPos},e.setSelections(o),n.indent&&(e.indentLine(n.newPos.line,null,!0),e.indentLine(n.newPos.line+1,null,!0))}function h(e,d){for(var c=e.listSelections(),i=[],g=d?"/":"</",b=0;b<c.length;b++){if(!c[b].empty())return a.Pass;var o=c[b].head,k=e.getTokenAt(o),
h=a.innerMode(e.getMode(),k.state),j=h.state;if(d&&("string"==k.type||"<"!=k.string.charAt(0)||k.start!=o.ch-1))return a.Pass;if("xml"!=h.mode.name)if("htmlmixed"==e.getMode().name&&"javascript"==h.mode.name)i[b]=g+"script>";else if("htmlmixed"==e.getMode().name&&"css"==h.mode.name)i[b]=g+"style>";else return a.Pass;else{if(!j.context||!j.context.tagName||f(e,j.context.tagName,o,j))return a.Pass;i[b]=g+j.context.tagName+">"}}e.replaceSelections(i);c=e.listSelections();for(b=0;b<c.length;b++)(b==c.length-
1||c[b].head.line<c[b+1].head.line)&&e.indentLine(c[b].head.line)}function j(e,d){if(e.indexOf)return e.indexOf(d);for(var c=0,a=e.length;c<a;++c)if(e[c]==d)return c;return-1}function f(e,d,c,i,g){var b,o,k;if(!a.scanForClosingTag||(b=Math.min(e.lastLine()+1,c.line+500),o=a.scanForClosingTag(e,c,null,b),!o||o.tag!=d))return!1;c=i.context;for(g=g?1:0;c&&c.tagName==d;c=c.prev)++g;c=o.to;for(o=1;o<g;o++){if(k=a.scanForClosingTag(e,c,null,b),!k||k.tag!=d)return!1;c=k.to}return!0}a.defineOption("autoCloseTags",
!1,function(e,d,c){if(c!=a.Init&&c&&e.removeKeyMap("autoCloseTags"),d){c={name:"autoCloseTags"};(typeof d!="object"||d.whenClosing)&&(c["'/'"]=function(c){return c.getOption("disableInput")?a.Pass:h(c,true)});(typeof d!="object"||d.whenOpening)&&(c["'>'"]=function(c){return m(c)});e.addKeyMap(c)}});var d="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),i="applet blockquote body button div dl fieldset form frameset h1 h2 h3 h4 h5 h6 head html iframe layer legend object ol p select table ul".split(" ");
a.commands.closeTag=function(d){return h(d)}});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function m(d){var i,e,f,c,n,g,b,o,k,p,j;if(d.getOption("disableInput"))return a.Pass;i=d.listSelections();f=[];for(c=0;c<i.length;c++){if(n=i[c].head,g=d.getTokenAt(n),"comment"!=g.type)return a.Pass;if(b=a.innerMode(d.getMode(),g.state).mode,e){if(e!=b)return a.Pass}else e=b;if(b=null,e.blockCommentStart&&
e.blockCommentContinue){if(o=g.string.indexOf(e.blockCommentEnd),k=d.getRange(a.Pos(n.line,0),a.Pos(n.line,g.end)),-1==o||o!=g.string.length-e.blockCommentEnd.length||!(n.ch>=o))if(0==g.string.indexOf(e.blockCommentStart)){if(b=k.slice(0,g.start),!/^\s*$/.test(b)){b="";for(k=0;k<g.start;++k)b+=" "}}else-1!=(j=k.indexOf(e.blockCommentContinue))&&j+e.blockCommentContinue.length>g.start&&/^\s*$/.test(k.slice(0,j))&&(b=k.slice(0,j));null!=b&&(b+=e.blockCommentContinue)}if(null==b&&e.lineComment&&h(d)&&
(p=d.getLine(n.line),j=p.indexOf(e.lineComment),-1<j&&(b=p.slice(0,j),/\S/.test(b)?b=null:b+=e.lineComment+p.slice(j+e.lineComment.length).match(/^\s*/)[0])),null==b)return a.Pass;f[c]="\n"+b}d.operation(function(){for(var b=i.length-1;0<=b;b--)d.replaceRange(f[b],i[b].from(),i[b].to(),"+insert")})}function h(d){return(d=d.getOption("continueComments"))&&"object"==typeof d?!1!==d.continueLineComment:!0}for(var j=["clike","css","javascript"],f=0;f<j.length;++f)a.extendMode(j[f],{blockCommentContinue:" * "});
a.defineOption("continueComments",null,function(d,i,e){var f,c;e&&e!=a.Init&&d.removeKeyMap("continueComment");i&&(f="Enter","string"==typeof i?f=i:"object"==typeof i&&i.key&&(f=i.key),c={name:"continueComment"},c[f]=m,d.addKeyMap(c))})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function m(c,d,g,b){var a=c.getLineHandle(d.line),k=d.ch-1,a=0<=k&&e[a.text.charAt(k)]||e[a.text.charAt(++k)],f,j,l;return a?(f=">"==a.charAt(1)?1:-1,g&&0<f!=(k==d.ch))?null:(j=c.getTokenTypeAt(i(d.line,k+1)),l=h(c,i(d.line,k+(0<f?1:0)),f,j||null,b),null==l)?null:{from:i(d.line,k),to:l&&l.pos,match:l&&
l.ch==a.charAt(0),forward:0<f}:null}function h(c,d,g,b,a){for(var k,f,h,l,j,m=a&&a.maxScanLineLength||1E4,z=a&&a.maxScanLines||1E3,w=[],a=a&&a.bracketRegex?a.bracketRegex:/[(){}[\]]/,z=0<g?Math.min(d.line+z,c.lastLine()+1):Math.max(c.firstLine()-1,d.line-z),s=d.line;s!=z;s+=g)if((k=c.getLine(s),k)&&(f=0<g?0:k.length-1,h=0<g?k.length:-1,!(k.length>m)))for(s==d.line&&(f=d.ch-(0>g?1:0));f!=h;f+=g)if(l=k.charAt(f),a.test(l)&&(void 0===b||c.getTokenTypeAt(i(s,f+1))==b))if(j=e[l],">"==j.charAt(1)==0<g)w.push(l);
else if(w.length)w.pop();else return{pos:i(s,f),ch:l};return s-g==(0<g?c.lastLine():c.firstLine())?!1:null}function j(c,e,g){for(var b,a,k=c.state.matchBrackets.maxHighlightLineLength||1E3,f=[],h=c.listSelections(),l=0;l<h.length;l++)(b=h[l].empty()&&m(c,h[l].head,!1,g))&&c.getLine(b.from.line).length<=k&&(a=b.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",f.push(c.markText(b.from,i(b.from.line,b.from.ch+1),{className:a})),b.to&&c.getLine(b.to.line).length<=k&&f.push(c.markText(b.to,
i(b.to.line,b.to.ch+1),{className:a})));if(f.length)if(d&&c.state.focused&&c.focus(),g=function(){c.operation(function(){for(var b=0;b<f.length;b++)f[b].clear()})},e)setTimeout(g,800);else return g}function f(c){c.operation(function(){l&&(l(),l=null);l=j(c,!1,c.state.matchBrackets)})}var d=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),i=a.Pos,e={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;a.defineOption("matchBrackets",!1,function(c,
d,g){if(g&&g!=a.Init&&c.off("cursorActivity",f),d){c.state.matchBrackets=typeof d=="object"?d:{};c.on("cursorActivity",f)}});a.defineExtension("matchBrackets",function(){j(this,!0)});a.defineExtension("findMatchingBracket",function(c,d,g){return m(this,c,d,g)});a.defineExtension("scanForBracket",function(c,d,g,b){return h(this,c,d,g,b)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],a):a(CodeMirror)})(function(a){function m(a){a.state.tagHit&&a.state.tagHit.clear();a.state.tagOther&&a.state.tagOther.clear();a.state.tagHit=a.state.tagOther=null}function h(f){f.state.failedTagMatch=!1;f.operation(function(){var d,i,e,h,c;(m(f),f.somethingSelected())||(d=f.getCursor(),
i=f.getViewport(),i.from=Math.min(i.from,d.line),i.to=Math.max(d.line+1,i.to),e=a.findMatchingTag(f,d,i),e)&&(f.state.matchBothTags&&(h="open"==e.at?e.open:e.close,h&&(f.state.tagHit=f.markText(h.from,h.to,{className:"CodeMirror-matchingtag"}))),c="close"==e.at?e.open:e.close,c?f.state.tagOther=f.markText(c.from,c.to,{className:"CodeMirror-matchingtag"}):f.state.failedTagMatch=!0)})}function j(a){a.state.failedTagMatch&&h(a)}a.defineOption("matchTags",!1,function(f,d,i){if(i&&i!=a.Init&&(f.off("cursorActivity",
h),f.off("viewportChange",j),m(f)),d){f.state.matchBothTags=typeof d=="object"&&d.bothTags;f.on("cursorActivity",h);f.on("viewportChange",j);h(f)}});a.commands.toMatchingTag=function(f){var d=a.findMatchingTag(f,f.getCursor()),i;d&&(i="close"==d.at?d.open:d.close,i&&f.extendSelection(i.to,i.from))}});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.defineOption("showTrailingSpace",!1,function(m,h,j){j==a.Init&&(j=false);j&&!h?m.removeOverlay("trailingspace"):!j&&h&&m.addOverlay({token:function(a){for(var d=a.string.length,i=d;i&&/\s/.test(a.string.charAt(i-1));--i);return i>a.pos?(a.pos=i,null):(a.pos=d,"trailingspace")},name:"trailingspace"})})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function m(d,i,e,f){function c(b){var c=n(d,i),a,e;if(!c||c.to.line-c.from.line<g)return null;a=d.findMarksAt(c.from);for(e=0;e<a.length;++e)if(a[e].__isFold&&"fold"!==f){if(!b)return null;c.cleared=!0;a[e].clear()}return c}var n,g,b,o;if(e&&e.call?(n=e,e=null):n=j(d,e,"rangeFinder"),"number"==typeof i&&
(i=a.Pos(i,0)),g=j(d,e,"minFoldSize"),b=c(!0),j(d,e,"scanUp"))for(;!b&&i.line>d.firstLine();)i=a.Pos(i.line-1,0),b=c(!1);b&&(!b.cleared&&"unfold"!==f)&&(e=h(d,e),a.on(e,"mousedown",function(b){o.clear();a.e_preventDefault(b)}),o=d.markText(b.from,b.to,{replacedWith:e,clearOnEnter:!0,__isFold:!0}),o.on("clear",function(b,c){a.signal(d,"unfold",d,b,c)}),a.signal(d,"fold",d,b.from,b.to))}function h(d,a){var e=j(d,a,"widget"),f;return"string"==typeof e&&(f=document.createTextNode(e),e=document.createElement("span"),
e.appendChild(f),e.className="CodeMirror-foldmarker"),e}function j(d,a,e){return a&&void 0!==a[e]?a[e]:(d=d.options.foldOptions)&&void 0!==d[e]?d[e]:f[e]}a.newFoldFunction=function(d,a){return function(e,f){m(e,f,{rangeFinder:d,widget:a})}};a.defineExtension("foldCode",function(a,f,e){m(this,a,f,e)});a.defineExtension("isFolded",function(a){for(var a=this.findMarksAt(a),f=0;f<a.length;++f)if(a[f].__isFold)return!0});a.commands.toggleFold=function(a){a.foldCode(a.getCursor())};a.commands.fold=function(a){a.foldCode(a.getCursor(),
null,"fold")};a.commands.unfold=function(a){a.foldCode(a.getCursor(),null,"unfold")};a.commands.foldAll=function(d){d.operation(function(){for(var f=d.firstLine(),e=d.lastLine();f<=e;f++)d.foldCode(a.Pos(f,0),null,"fold")})};a.commands.unfoldAll=function(d){d.operation(function(){for(var f=d.firstLine(),e=d.lastLine();f<=e;f++)d.foldCode(a.Pos(f,0),null,"unfold")})};a.registerHelper("fold","combine",function(){var a=Array.prototype.slice.call(arguments,0);return function(f,e){for(var h,c=0;c<a.length;++c)if(h=
a[c](f,e),h)return h}});a.registerHelper("fold","auto",function(a,f){for(var e,h=a.getHelpers(f,"fold"),c=0;c<h.length;c++)if(e=h[c](a,f),e)return e});var f={rangeFinder:a.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1};a.defineOption("foldOptions",null);a.defineExtension("foldOption",function(a,f){return j(this,a,f)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],a):a(CodeMirror)})(function(a){function m(a){this.options=a;this.from=this.to=0}function h(a,b){for(var c=a.findMarksAt(n(b)),e=0;e<c.length;++e)if(c[e].__isFold&&c[e].find().from.line==b)return c[e]}function j(a){if("string"==typeof a){var b=document.createElement("div");return b.className=a+" CodeMirror-guttermarker-subtle",
b}return a.cloneNode(!0)}function f(a,b,c){var e=a.state.foldGutter.options,d=b,f=a.foldOption(e,"minFoldSize"),i=a.foldOption(e,"rangeFinder");a.eachLine(b,c,function(b){var c=null,o,l;h(a,d)?c=j(e.indicatorFolded):(o=n(d,0),l=i&&i(a,o),l&&l.to.line-l.from.line>=f&&(c=j(e.indicatorOpen)));a.setGutterMarker(b,e.gutter,c);++d})}function d(a){var b=a.getViewport(),c=a.state.foldGutter;c&&(a.operation(function(){f(a,b.from,b.to)}),c.from=b.from,c.to=b.to)}function i(a,b,c){var e=a.state.foldGutter,d,
f;e&&(d=e.options,c==d.gutter)&&(f=h(a,b),f?f.clear():a.foldCode(n(b,0),d.rangeFinder))}function e(a){var b=a.state.foldGutter,c;b&&(c=b.options,b.from=b.to=0,clearTimeout(b.changeUpdate),b.changeUpdate=setTimeout(function(){d(a)},c.foldOnChangeTimeSpan||600))}function l(a){var b=a.state.foldGutter,c;b&&(c=b.options,clearTimeout(b.changeUpdate),b.changeUpdate=setTimeout(function(){var c=a.getViewport();b.from==b.to||20<c.from-b.to||20<b.from-c.to?d(a):a.operation(function(){c.from<b.from&&(f(a,c.from,
b.from),b.from=c.from);c.to>b.to&&(f(a,b.to,c.to),b.to=c.to)})},c.updateViewportTimeSpan||400))}function c(a,b){var c=a.state.foldGutter,e;c&&(e=b.line,e>=c.from&&e<c.to&&f(a,e,e+1))}a.defineOption("foldGutter",!1,function(f,b,h){if(h&&h!=a.Init&&(f.clearGutter(f.state.foldGutter.options.gutter),f.state.foldGutter=null,f.off("gutterClick",i),f.off("change",e),f.off("viewportChange",l),f.off("fold",c),f.off("unfold",c),f.off("swapDoc",d)),b){var h=f.state,k=b,b=(k===true&&(k={}),k.gutter==null&&(k.gutter=
"CodeMirror-foldgutter"),k.indicatorOpen==null&&(k.indicatorOpen="CodeMirror-foldgutter-open"),k.indicatorFolded==null&&(k.indicatorFolded="CodeMirror-foldgutter-folded"),k);h.foldGutter=new m(b);d(f);f.on("gutterClick",i);f.on("change",e);f.on("viewportChange",l);f.on("fold",c);f.on("unfold",c);f.on("swapDoc",d)}});var n=a.Pos});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.registerHelper("fold","brace",function(m,h){function j(b){for(var c,e=h.ch,k=0;;)if(c=0>=e?-1:d.lastIndexOf(b,e-1),-1==c){if(1==k)break;k=1;e=d.length}else{if(1==k&&c<h.ch)break;if(i=m.getTokenTypeAt(a.Pos(f,c+1)),!/^(comment|string)/.test(i))return c+1;e=c-1}}var f=h.line,d=m.getLine(f),i,e="{",l="}",
c=j("{"),n,g,b,o,k,p,t,x,u;if(null==c&&(e="[",l="]",c=j("[")),null!=c){n=1;g=m.lastLine();k=f;a:for(;k<=g;++k){p=m.getLine(k);for(t=k==f?c:0;!(x=p.indexOf(e,t),u=p.indexOf(l,t),0>x&&(x=p.length),0>u&&(u=p.length),t=Math.min(x,u),t==p.length);){if(m.getTokenTypeAt(a.Pos(k,t+1))==i)if(t==x)++n;else if(!--n){b=k;o=t;break a}++t}}if(null!=b&&(f!=b||o!=c))return{from:a.Pos(f,c),to:a.Pos(b,o)}}});a.registerHelper("fold","import",function(m,h){function j(e){var d,c,f,g;if(e<m.firstLine()||e>m.lastLine()||
(d=m.getTokenAt(a.Pos(e,1)),/\S/.test(d.string)||(d=m.getTokenAt(a.Pos(e,d.end+1))),"keyword"!=d.type||"import"!=d.string))return null;c=e;for(e=Math.min(m.lastLine(),e+10);c<=e;++c)if(f=m.getLine(c),g=f.indexOf(";"),-1!=g)return{startCh:d.end,end:a.Pos(c,g)}}var h=h.line,f=j(h),d,i;if(!f||j(h-1)||(d=j(h-2))&&d.end.line==h-1)return null;for(d=f.end;!(i=j(d.line+1),null==i);)d=i.end;return{from:m.clipPos(a.Pos(h,f.startCh+1)),to:d}});a.registerHelper("fold","include",function(m,h){function j(e){if(e<
m.firstLine()||e>m.lastLine())return null;var d=m.getTokenAt(a.Pos(e,1));return/\S/.test(d.string)||(d=m.getTokenAt(a.Pos(e,d.end+1))),"meta"==d.type&&"#include"==d.string.slice(0,8)?d.start+8:void 0}var h=h.line,f=j(h),d,i;if(null==f||null!=j(h-1))return null;for(d=h;!(i=j(d+1),null==i);)++d;return{from:a.Pos(h,f+1),to:m.clipPos(a.Pos(d))}})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.registerGlobalHelper("fold","comment",function(a){return a.blockCommentStart&&a.blockCommentEnd},function(m,h){var j=m.getModeAt(h),f=j.blockCommentStart,j=j.blockCommentEnd,d,i,e,l,c,n,g,b,o,k,p;if(f&&j){d=h.line;i=m.getLine(d);l=h.ch;for(c=0;;)if(n=0>=l?-1:i.lastIndexOf(f,l-1),-1==n){if(1==c)return;
c=1;l=i.length}else{if(1==c&&n<h.ch)return;if(/comment/.test(m.getTokenTypeAt(a.Pos(d,n+1)))){e=n+f.length;break}l=n-1}n=1;i=m.lastLine();l=d;a:for(;l<=i;++l){c=m.getLine(l);for(o=l==d?e:0;!(k=c.indexOf(f,o),p=c.indexOf(j,o),0>k&&(k=c.length),0>p&&(p=c.length),o=Math.min(k,p),o==c.length);){if(o==k)++n;else if(!--n){g=l;b=o;break a}++o}}if(null!=g&&(d!=g||b!=e))return{from:a.Pos(d,e),to:a.Pos(g,b)}}})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.registerHelper("fold","indent",function(m,h){var j=m.getOption("tabSize"),f=m.getLine(h.line),d,i,e,l;if(/\S/.test(f)){var c=a.countColumn(f,null,j),n=null;d=h.line+1;for(i=m.lastLine();d<=i;++d)if(e=m.getLine(d),l=a.countColumn(e,null,j),l>c)n=d;else if(/\S/.test(e))break;if(n)return{from:a.Pos(h.line,
f.length),to:a.Pos(n,m.getLine(n).length)}}})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function m(b,a,c,e){this.line=a;this.ch=c;this.cm=b;this.text=b.getLine(a);this.min=e?e.from:b.firstLine();this.max=e?e.to-1:b.lastLine()}function h(b,a){var c=b.cm.getTokenTypeAt(n(b.line,a));return c&&/\btag\b/.test(c)}function j(b){if(!(b.line>=b.max))return b.ch=0,b.text=b.cm.getLine(++b.line),!0}
function f(b){if(!(b.line<=b.min))return b.text=b.cm.getLine(--b.line),b.ch=b.text.length,!0}function d(b){for(var a,c,e;;){if(a=b.text.indexOf(">",b.ch),-1==a)if(j(b))continue;else break;if(h(b,a+1))return c=b.text.lastIndexOf("/",a),e=-1<c&&!/\S/.test(b.text.slice(c+1,a)),b.ch=a+1,e?"selfClose":"regular";b.ch=a+1}}function i(b){for(var a,c;;){if(a=b.ch?b.text.lastIndexOf("<",b.ch-1):-1,-1==a)if(f(b))continue;else break;if(h(b,a+1)){if(g.lastIndex=a,b.ch=a,c=g.exec(b.text),c&&c.index==a)return c}else b.ch=
a}}function e(b){for(;;){g.lastIndex=b.ch;var a=g.exec(b.text);if(!a)if(j(b))continue;else break;if(h(b,a.index+1))return b.ch=a.index+a[0].length,a;b.ch=a.index+1}}function l(b,a){for(var c=[],f;;){var g=e(b),h,i=b.line,j=b.ch-(g?g[0].length:0);if(!g||!(h=d(b)))break;if("selfClose"!=h)if(g[1]){for(f=c.length-1;0<=f;--f)if(c[f]==g[2]){c.length=f;break}if(0>f&&(!a||a==g[2]))return{tag:g[2],from:n(i,j),to:n(b.line,b.ch)}}else c.push(g[2])}}function c(b,a){for(var c=[],e,d;;){var g;a:{g=b;for(var j=
void 0,l=d=void 0;;){if(j=g.ch?g.text.lastIndexOf(">",g.ch-1):-1,-1==j)if(f(g))continue;else{g=void 0;break a}if(h(g,j+1)){g=(d=g.text.lastIndexOf("/",j),l=-1<d&&!/\S/.test(g.text.slice(d+1,j)),g.ch=j+1,l?"selfClose":"regular");break a}else g.ch=j}g=void 0}if(e=g,!e)break;if("selfClose"==e)i(b);else{l=b.line;g=b.ch;j=i(b);if(!j)break;if(j[1])c.push(j[2]);else{for(d=c.length-1;0<=d;--d)if(c[d]==j[2]){c.length=d;break}if(0>d&&(!a||a==j[2]))return{tag:j[2],from:n(b.line,b.ch),to:n(l,g)}}}}}var n=a.Pos,
g=RegExp("<(/?)([A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");a.registerHelper("fold","xml",function(a,c){for(var f=new m(a,c.line,0),g,h,i;!(g=e(f),
!g||f.line!=c.line||!(h=d(f)));)if(!g[1]&&"selfClose"!=h)return c=n(f.line,f.ch),i=l(f,g[2]),i&&{from:c,to:i.from}});a.findMatchingTag=function(a,e,f){var g=new m(a,e.line,e.ch,f),h;if(-1!=g.text.indexOf(">")||-1!=g.text.indexOf("<")){var j=d(g),u=j&&n(g.line,g.ch),y=j&&i(g);if(j&&y&&!(0<(g.line-e.line||g.ch-e.ch)))return(h={from:n(g.line,g.ch),to:u,tag:y[2]},"selfClose"==j)?{open:h,close:null,at:"open"}:y[1]?{open:c(g,y[2]),close:h,at:"close"}:(g=new m(a,u.line,u.ch,f),{open:h,close:l(g,y[2]),at:"open"})}};
a.findEnclosingTag=function(a,e,d){for(var f=new m(a,e.line,e.ch,d),g,h,i;!(g=c(f),!g);)if(h=new m(a,e.line,e.ch,d),i=l(h,g.tag),i)return{open:g,close:i}};a.scanForClosingTag=function(a,c,e,d){a=new m(a,c.line,c.ch,d?{from:0,to:d}:null);return l(a,e)}});
(function(){CodeMirror.defineExtension("autoFormatAll",function(a,m){for(var h,j=this,f=j.getMode(),d=j.getRange(a,m).split("\n"),i=CodeMirror.copyState(f,j.getTokenAt(a).state),e=j.getOption("tabSize"),l="",c=0,n=0==a.ch,g=0;g<d.length;++g){for(h=new CodeMirror.StringStream(d[g],e);!h.eol();){var b=CodeMirror.innerMode(f,i),o=f.token(h,i),k=h.current();h.start=h.pos;(!n||/\S/.test(k))&&(l+=k,n=!1);if(!n&&b.mode.newlineAfterToken&&b.mode.newlineAfterToken(o,k,h.string.slice(h.pos)||d[g+1]||"",b.state))l+=
"\n",n=!0,++c}!h.pos&&f.blankLine&&f.blankLine(i);!n&&g<d.length-1&&(l+="\n",n=!0,++c)}j.operation(function(){j.replaceRange(l,a,m);for(var b=a.line+1,e=a.line+c;b<=e;++b)j.indentLine(b,"smart");j.setCursor({line:0,ch:0})})})})();
(function(){function a(a){for(var h,j,f=[/for\s*?\((.*?)\)/g,/&#?[a-z0-9]+;[\s\S]/g,/\"(.*?)((\")|$)/g,/\/\*(.*?)(\*\/|$)/g,/^\/\/.*/g],d=[],i=0;i<f.length;i++)for(h=0;h<a.length;)if(j=a.substr(h).match(f[i]),null!=j)d.push({start:h+j.index,end:h+j.index+j[0].length}),h+=j.index+Math.max(1,j[0].length);else break;return d.sort(function(a,d){return a.start-d.start}),d}CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(a,h){return/^[;{}]$/.test(h)}});CodeMirror.extendMode("javascript",
{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(m){var h=0,j=this.jsonMode?function(a){return a.replace(/([,{])/g,"$1\n").replace(/}/g,"\n}")}:function(a){return a.replace(/(;|\{|\})([^\r\n;])/g,"$1\n$2")},f=a(m),d="",i;if(null!=f){for(i=0;i<f.length;i++)f[i].start>h&&(d+=j(m.substring(h,f[i].start)),h=f[i].start),f[i].start<=h&&f[i].end>=h&&(d+=m.substring(h,f[i].end),h=f[i].end);h<m.length&&(d+=j(m.substr(h)))}else d=j(m);return d.replace(/^\n*|\n*$/,
"")}});CodeMirror.extendMode("xml",{commentStart:"<\!--",commentEnd:"--\>",noBreak:!1,noBreakEmpty:null,tagType:"",tagName:"",isXML:!1,newlineAfterToken:function(a,h,j){var f=!1,d=null,i="",e;if(this.isXML="xml"==this.configuration?!0:!1,"comment"==a||/<\!--/.test(j))return!1;if("tag"==a){if(0==h.indexOf("<")&&0==!h.indexOf("</")&&(this.tagType="open",d=h.match(/^<\s*?([\w]+?)$/i),this.tagName=null!=d?d[1]:"",i=this.tagName.toLowerCase(),-1!="|label|li|option|textarea|title|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+
i+"|")&&(this.noBreak=!0)),0==h.indexOf(">")&&"open"==this.tagType)return(this.tagType="",e=this.isXML?"[^<]*?":"",RegExp("^"+e+"</s*?"+this.tagName+"s*?>","i").test(j))?(this.noBreak=!1,this.isXML||(this.tagName=""),!1):(f=this.noBreak,this.noBreak=!1,f?!1:!0);if(0==h.indexOf("</")&&(this.tagType="close",d=h.match(/^<\/\s*?([\w]+?)$/i),null!=d&&(i=d[1].toLowerCase()),-1!="|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+i+"|")&&(this.noBreak=!0)),
0==h.indexOf(">")&&"close"==this.tagType)return(this.tagType="",0==j.indexOf("<")&&(d=j.match(/^<\/?\s*?([\w]+?)(\s|>)/i),i=null!=d?d[1].toLowerCase():"",-1=="|label|li|option|textarea|title|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+i+"|")))?(this.noBreak=!1,!0):(f=this.noBreak,this.noBreak=!1,f?!1:!0)}return 0==j.indexOf("<")?(this.noBreak=!1,this.isXML&&""!=this.tagName)?(this.tagName="",!1):(d=j.match(/^<\/?\s*?([\w]+?)(\s|>)/i),i=null!=
d?d[1].toLowerCase():"",-1!="|label|li|option|textarea|title|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+i+"|")?!1:!0):!1}});CodeMirror.defineExtension("commentRange",function(a,h,j){var f=this,d=CodeMirror.innerMode(f.getMode(),f.getTokenAt(h).state).mode;f.operation(function(){if(a)f.replaceRange(d.commentEnd,j),f.replaceRange(d.commentStart,h),h.line==j.line&&h.ch==j.ch&&f.setCursor(h.line,h.ch+d.commentStart.length);else{var i=f.getRange(h,
j),e=i.indexOf(d.commentStart),l=i.lastIndexOf(d.commentEnd);-1<e&&-1<l&&l>e&&(i=i.substr(0,e)+i.substring(e+d.commentStart.length,l)+i.substr(l+d.commentEnd.length));f.replaceRange(i,h,j)}})});CodeMirror.defineExtension("autoIndentRange",function(a,h){var j=this;this.operation(function(){for(var f=a.line;f<=h.line;f++)j.indentLine(f,"smart")})});CodeMirror.defineExtension("autoFormatRange",function(a,h){for(var j,f=this,d=f.getMode(),i=f.getRange(a,h).split("\n"),e=CodeMirror.copyState(d,f.getTokenAt(a).state),
l=f.getOption("tabSize"),c="",n=0,g=0==a.ch,b=0;b<i.length;++b){for(j=new CodeMirror.StringStream(i[b],l);!j.eol();){var o=CodeMirror.innerMode(d,e),k=d.token(j,e),p=j.current();j.start=j.pos;(!g||/\S/.test(p))&&(c+=p,g=!1);if(!g&&o.mode.newlineAfterToken&&o.mode.newlineAfterToken(k,p,j.string.slice(j.pos)||i[b+1]||"",o.state))c+="\n",g=!0,++n}!j.pos&&d.blankLine&&d.blankLine(e);!g&&b<i.length-1&&(c+="\n",g=!0,++n)}f.operation(function(){f.replaceRange(c,a,h);for(var b=a.line+1,e=a.line+n;b<=e;++b)f.indentLine(b,
"smart");f.setSelection(a,f.getCursor(!1))})})})();
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function m(a){for(var f=0;f<a.state.activeLines.length;f++)a.removeLineClass(a.state.activeLines[f],"wrap",d),a.removeLineClass(a.state.activeLines[f],"background",i)}function h(a,d){if(a.length!=d.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=d[c])return!1;return!0}function j(a,f){for(var c,j,g=
[],b=0;b<f.length;b++)(c=f[b],c.empty())&&(j=a.getLineHandleVisualStart(c.head.line),g[g.length-1]!=j&&g.push(j));h(a.state.activeLines,g)||a.operation(function(){m(a);for(var b=0;b<g.length;b++)a.addLineClass(g[b],"wrap",d),a.addLineClass(g[b],"background",i);a.state.activeLines=g})}function f(a,d){j(a,d.ranges)}var d="CodeMirror-activeline",i="CodeMirror-activeline-background";a.defineOption("styleActiveLine",!1,function(d,h,c){c=c&&c!=a.Init;if(h&&!c){d.state.activeLines=[];j(d,d.listSelections());
d.on("beforeSelectionChange",f)}else!h&&c&&(d.off("beforeSelectionChange",f),m(d),delete d.state.activeLines)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function m(a){"object"==typeof a&&(this.minChars=a.minChars,this.style=a.style,this.showToken=a.showToken,this.delay=a.delay,this.wordsOnly=a.wordsOnly);null==this.style&&(this.style=i);null==this.minChars&&(this.minChars=d);null==this.delay&&(this.delay=e);null==this.wordsOnly&&(this.wordsOnly=l);this.overlay=
this.timeout=null}function h(a){var d=a.state.matchHighlighter;clearTimeout(d.timeout);d.timeout=setTimeout(function(){j(a)},d.delay)}function j(a){a.operation(function(){var d=a.state.matchHighlighter,e,b,h;if(d.overlay&&(a.removeOverlay(d.overlay),d.overlay=null),!a.somethingSelected()&&d.showToken){e=!0===d.showToken?/[\w$]/:d.showToken;h=a.getCursor();b=a.getLine(h.line);for(var i=h=h.ch;h&&e.test(b.charAt(h-1));)--h;for(;i<b.length&&e.test(b.charAt(i));)++i;h<i&&a.addOverlay(d.overlay=f(b.slice(h,
i),e,d.style))}else if(e=a.getCursor("from"),b=a.getCursor("to"),e.line==b.line){if(!(i=!d.wordsOnly))var j,l,i=null!==a.getRange(e,b).match(/^\w+$/)?0<e.ch&&(j={line:e.line,ch:e.ch-1},l=a.getRange(j,e),null===l.match(/\W/))?!1:b.ch<a.getLine(e.line).length&&(j={line:b.line,ch:b.ch+1},l=a.getRange(b,j),null===l.match(/\W/))?!1:!0:!1;i&&(h=a.getRange(e,b).replace(/^\s+|\s+$/g,""),h.length>=d.minChars&&a.addOverlay(d.overlay=f(h,!1,d.style)))}})}function f(a,d,e){return{token:function(b){if(b.match(a)&&
(!d||(!b.start||!d.test(b.string.charAt(b.start-1)))&&(b.pos==b.string.length||!d.test(b.string.charAt(b.pos)))))return e;b.next();b.skipTo(a.charAt(0))||b.skipToEnd()}}}var d=2,i="matchhighlight",e=100,l=!1;a.defineOption("highlightSelectionMatches",!1,function(c,d,e){if(e&&e!=a.Init){(e=c.state.matchHighlighter.overlay)&&c.removeOverlay(e);clearTimeout(c.state.matchHighlighter.timeout);c.state.matchHighlighter=null;c.off("cursorActivity",h)}if(d){c.state.matchHighlighter=new m(d);j(c);c.on("cursorActivity",
h)}})});